{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://spectramind-v50.org/schemas/submission.schema.json",
  "title": "Ariel Submission (SpectraMind V50)",
  "description": "Single-record JSON representation of a Kaggle submission row for the Ariel Data Challenge. Exactly one of `sample_id` (preferred) or legacy `id` must be present. Includes 283 mean values and 283 non-negative uncertainty values.",

  "type": "object",
  "additionalProperties": false,

  "properties": {
    "sample_id": {
      "type": "string",
      "description": "Preferred ID field for a submission row. Must use alphanumerics, underscore, or hyphen.",
      "pattern": "^[A-Za-z0-9_\\-]+$",
      "examples": ["00012345", "row_000001", "planet-42"]
    },

    "id": {
      "type": "string",
      "description": "Legacy ID field for backward compatibility with earlier CSVs. Prefer `sample_id`.",
      "pattern": "^[A-Za-z0-9_\\-]+$",
      "examples": ["00012345", "row_000001", "planet-42"]
    },

    "mu": {
      "type": "array",
      "description": "Mean transmission spectrum across exactly 283 wavelength bins (mu_000 … mu_282).",
      "items": {
        "type": "number",
        "description": "Mean transit depth for a single wavelength bin."
      },
      "minItems": 283,
      "maxItems": 283,
      "examples": [[0.0012, 0.0013, 0.0011]]
    },

    "sigma": {
      "type": "array",
      "description": "Uncertainty (standard deviation) per wavelength bin (sigma_000 … sigma_282). Must be non-negative.",
      "items": {
        "type": "number",
        "minimum": 0,
        "description": "Non-negative standard deviation for a single wavelength bin."
      },
      "minItems": 283,
      "maxItems": 283,
      "examples": [[0.0001, 0.0001, 0.0002]]
    },

    "config_hash": {
      "type": "string",
      "description": "Optional SHA256 hash of the Hydra/DVC config snapshot that produced this row.",
      "pattern": "^[A-Fa-f0-9]{64}$"
    },

    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Optional UTC timestamp of when this record was generated."
    }
  },

  "required": ["mu", "sigma"],
  "oneOf": [
    { "required": ["sample_id"] },
    { "required": ["id"] }
  ],

  "examples": [
    {
      "sample_id": "row_000001",
      "mu": [0.0012, 0.0013, 0.0011, 0.0010, 0.0012, 0.0013, 0.0011, 0.0012, 0.0012, 0.0013, "... x283"],
      "sigma": [0.0001, 0.0001, 0.0002, 0.0002, 0.0001, 0.0001, 0.0002, 0.0002, 0.0001, 0.0001, "... x283"],
      "config_hash": "5f2d6f4e5b8c4a91d23e9c1f3aa4d80f29e613a768e345a91c1de7bb14a02a8b",
      "created_at": "2025-09-07T23:55:00Z"
    }
  ]
}
