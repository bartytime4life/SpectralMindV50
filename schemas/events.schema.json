{
  "$id": "https://spectramind-v50.org/schemas/events.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "SpectraMind V50 â€” Event JSONL",
  "description": "Structured log event used across CLI, pipeline, and diagnostics. One JSON object per line in events.jsonl.",
  "type": "object",
  "additionalProperties": false,

  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for this event (UUID or ULID)."
    },
    "ts": {
      "type": "number",
      "description": "Unix timestamp (float seconds since epoch). Required for ordering and replay."
    },
    "kind": {
      "type": "string",
      "description": "Categorical event type.",
      "enum": [
        "cli_invoked",
        "stage_start",
        "stage_end",
        "metric",
        "error",
        "warning",
        "artifact",
        "lineage"
      ]
    },
    "payload": {
      "type": "object",
      "description": "Event-specific payload. Shape depends on 'kind'.",
      "additionalProperties": true
    },

    "run_id": {
      "type": "string",
      "description": "UUID or hash linking this event to a specific run/session."
    },
    "config_hash": {
      "type": "string",
      "description": "SHA256 or short hash of Hydra/DVC config snapshot for reproducibility."
    },
    "level": {
      "type": "string",
      "enum": ["DEBUG", "INFO", "WARNING", "ERROR"],
      "description": "Logging severity level."
    },
    "msg": {
      "type": "string",
      "description": "Optional human-readable message for quick inspection."
    },
    "lineage": {
      "type": "object",
      "description": "Optional lineage block linking inputs/outputs for audit trails.",
      "properties": {
        "inputs": { "type": "array", "items": { "type": "string", "format": "uri-reference" } },
        "outputs": { "type": "array", "items": { "type": "string", "format": "uri-reference" } }
      },
      "additionalProperties": false
    },
    "tags": {
      "type": "array",
      "description": "Optional freeform tags for filtering/search (e.g., stage=calibrate).",
      "items": { "type": "string" }
    }
  },

  "required": ["id", "ts", "kind", "payload"]
}
