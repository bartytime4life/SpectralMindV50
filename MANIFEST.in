# ==============================================================================
# MANIFEST.in â€” SpectraMind V50 (hardened & aligned with wheel package-data)
# Ensures non-Python runtime assets ship in sdists to match the wheel.
# ==============================================================================

# --- Top-level project metadata ------------------------------------------------
include README.md
include CHANGELOG.md
include LICENSE
include VERSION
include CITATION.cff
include pyproject.toml
include setup.cfg
include .editorconfig
include .pre-commit-config.yaml
# If you publish these, keep them; otherwise remove:
# include .cz.toml
# include .secrets.baseline

# --- GitHub Actions (for consumers who mirror CI) ------------------------------
recursive-include .github/workflows *.yml *.yaml

# --- Root-level Hydra config trees (external profiles) -------------------------
# Keep broad patterns to avoid missing new files.
graft configs
global-include configs/*.yaml configs/*.yml

# --- Package runtime assets (inside src/) -------------------------------------
# Mirrors [tool.setuptools.package-data] in pyproject.toml
graft src/spectramind/configs
graft src/spectramind/schemas
graft src/spectramind/validators
graft src/spectramind/diagnostics/templates
graft src/spectramind/assets

global-include src/spectramind/**/*.yaml src/spectramind/**/*.yml
global-include src/spectramind/**/*.json
global-include src/spectramind/**/*.j2 src/spectramind/**/*.jinja
global-include src/spectramind/**/*.html src/spectramind/**/*.css
global-include src/spectramind/**/*.png src/spectramind/**/*.svg src/spectramind/**/*.js
global-include src/spectramind/**/*.mmd

# --- Kaggle assets -------------------------------------------------------------
# Notebooks/templates and pinned requirements for Kaggle runtime.
graft kaggle
global-include kaggle/*.md kaggle/*.txt kaggle/*.ipynb kaggle/*.py

# --- Scripts / CLI helpers -----------------------------------------------------
graft scripts
graft bin
global-include scripts/*.sh scripts/*.py
global-include bin/*.sh bin/*.py

# --- Docs site & ADRs ----------------------------------------------------------
graft docs
graft docs/adr
global-include docs/**/*.md docs/**/*.yml docs/**/*.yaml docs/**/*.svg docs/**/*.png

# --- Examples / notebooks ------------------------------------------------------
graft notebooks
global-include notebooks/*.ipynb notebooks/*.md
prune notebooks/**/.ipynb_checkpoints

# --- Exclusions: compiled, caches, data, heavy artifacts, local state ----------
global-exclude *.py[cod] __pycache__ *.so *.dylib *.dll *.bak *.tmp *.log
global-exclude .DS_Store Thumbs.db

prune .venv
prune venv
prune env
prune .tox
prune .mypy_cache
prune .ruff_cache
prune .pytest_cache
prune .ipynb_checkpoints

prune build
prune dist
prune site
prune htmlcov
prune coverage
prune reports
prune logs
prune artifacts
prune data
prune .dvc
prune .git
```

Quick sanity:

```bash
# Build sdist + wheel and inspect
python -m build
python - <<'PY'
import tarfile, zipfile, sys, pathlib
sdist = next(pathlib.Path("dist").glob("*.tar.gz"))
wheel = next(pathlib.Path("dist").glob("*.whl"))
print("SDIST:", sdist); print("WHEEL:", wheel)
with tarfile.open(sdist, "r:gz") as t: s = {m.name for m in t.getmembers() if m.isfile()}
with zipfile.ZipFile(wheel) as z: w = set(z.namelist())
print("configs/ in sdist?", any(p.endswith("/configs/config.yaml") for p in s))
print("spectramind assets in wheel?", any("spectramind/assets" in p for p in w))
PY
```
