# Inspect the generated SVG for validity and basic structure
from pathlib import Path
import xml.etree.ElementTree as ET
import json

svg_path = Path("/mnt/data/assets/diagrams/provenance.svg")
out = {"exists": svg_path.exists(), "size_bytes": None, "head": None, "tail": None, "xml_ok": None, "root_tag": None, "width": None, "height": None, "viewBox": None}

if svg_path.exists():
    data = svg_path.read_text(encoding="utf-8", errors="replace")
    out["size_bytes"] = len(data.encode("utf-8"))
    out["head"] = data[:400]
    out["tail"] = data[-400:]
    try:
        root = ET.fromstring(data)
        out["xml_ok"] = True
        out["root_tag"] = root.tag
        out["width"] = root.attrib.get("width")
        out["height"] = root.attrib.get("height")
        out["viewBox"] = root.attrib.get("viewBox")
    except Exception as e:
        out["xml_ok"] = False
        out["xml_err"] = repr(e)

print(json.dumps(out, indent=2))
